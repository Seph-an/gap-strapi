import{j as a,e as h,f4 as M,T as S,a as x,bo as b,bv as k,bW as w,bq as A,bp as P,f5 as W,r as u,f6 as O,f7 as I,f8 as _}from"./strapi-B8XjzIdc.js";import{u as v}from"./useDragLayer-CDMCzu_6.js";const F={STAGE:"stage"},G=({name:n})=>a.jsxs(h,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:"30rem",children:[a.jsx(h,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6,children:a.jsx(M,{width:"0.8rem",fill:"neutral600"})}),a.jsx(S,{fontWeight:"bold",children:n})]});function L(n,e,t){if(!n||!e||!t)return{display:"none"};const{x:r,y:i}=t;return{transform:`translate(${r}px, ${i}px)`}}const q=()=>{const{itemType:n,isDragging:e,item:t,initialOffset:r,currentOffset:i,mouseOffset:g}=v(o=>({item:o.getItem(),itemType:o.getItemType(),initialOffset:o.getInitialSourceClientOffset(),currentOffset:o.getSourceClientOffset(),isDragging:o.isDragging(),mouseOffset:o.getClientOffset()}));return!e||n!==F.STAGE?null:a.jsx(w,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:a.jsxs(w,{style:L(r,i,g),children:[a.jsx(G,{name:typeof t.item=="string"?t.item:null}),";"]})})},N=({children:n})=>a.jsx(b.Main,{children:a.jsx(k.Content,{children:n})}),$=({title:n,subtitle:e,navigationAction:t,primaryAction:r})=>{const{formatMessage:i}=x();return a.jsxs(a.Fragment,{children:[a.jsx(b.Title,{children:i({id:"Settings.PageTitle",defaultMessage:"Settings - {name}"},{name:n})}),a.jsx(k.BaseHeader,{navigationAction:t,primaryAction:r,title:n,subtitle:e})]})},f={id:"notification.error",defaultMessage:"An error occurred, please try again"},B=(n={})=>{const{toggleNotification:e}=A(),{formatMessage:t}=x(),{_unstableFormatAPIError:r}=P(),{skip:i=!1,...g}=n,{data:o,isLoading:j,error:l}=W({populate:["stages","stageRequiredToPublish"],...g},{skip:i});u.useEffect(()=>{l&&e({type:"danger",message:r(l)})},[l,r,e]);const[p]=O(),E=u.useCallback(async d=>{try{const s=await p({data:d});return"error"in s?(e({type:"danger",message:r(s.error)}),s):(e({type:"success",message:t({id:"actions.created",defaultMessage:"Created workflow"})}),s)}catch(s){throw e({type:"danger",message:t(f)}),s}},[p,r,t,e]),[y]=I(),R=u.useCallback(async(d,s)=>{try{const c=await y({id:d,data:s});return"error"in c?(e({type:"danger",message:r(c.error)}),c):(e({type:"success",message:t({id:"actions.updated",defaultMessage:"Updated workflow"})}),c)}catch(c){throw e({type:"danger",message:t(f)}),c}},[r,t,e,y]),[m]=_(),T=u.useCallback(async d=>{try{const s=await m({id:d});if("error"in s){e({type:"danger",message:r(s.error)});return}return e({type:"success",message:t({id:"actions.deleted",defaultMessage:"Deleted workflow"})}),s.data}catch(s){throw e({type:"danger",message:t(f)}),s}},[m,r,t,e]),{workflows:D=[],meta:C}=o??{};return{meta:C,workflows:D,isLoading:j,error:l,create:E,delete:T,update:R}};export{F as D,$ as H,N as R,q as a,B as u};
